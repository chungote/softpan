CREATE TRIGGER tbi_pedido_proveedor_cab BEFORE INSERT ON pedido_proveedor
FOR EACH ROW
 BEGIN
 declare proveedor_not_found condition for sqlstate '99001':

 if ((select plazo_entrega_prov from personas where cod_persona= new.cod_proveedor) is null  or (select plazo_entrega_prov from  personas where cod_persona= new.cod_proveedor) = 0) then
    signal proveedor_not_found SET MESSAGE_TEST 'El proveedor no posee el plazo en dias';
 end if;

 END



CREATE PROCEDURE sp_update_employee_dob
    (p_employee_id int, p_dob date)
BEGIN
    DECLARE employee_is_too_young CONDITION FOR SQLSTATE '99001';

    IF DATE_SUB(curdate(), INTERVAL 16 YEAR) <P_DOB THEN
         SIGNAL employee_is_too_young
            SET MESSAGE_TEST='Employee must be 16 years or older';
    ELSE
        UPDATE employees
           SET date_of_birth=p_dob
         WHERE employee_id=p_employee_id; 
    END IF;
END;